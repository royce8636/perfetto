buffers {
  size_kb: 100024
  optimize_for: ONE_SHOT_READ
  fill_policy: RING_BUFFER
}

data_sources {
  config {
    name: "com.google.perfetto.ftrace"
    target_buffer: 0
    ftrace_config {
      buffer_size_kb: 40 # 4 (page size) * 10
      drain_period_ms: 200
      ftrace_events: "binder_lock"
      ftrace_events: "binder_locked"
      ftrace_events: "binder_set_priority"
      ftrace_events: "binder_transaction"
      ftrace_events: "binder_transaction_received"
      ftrace_events: "binder_unlock"
      ftrace_events: "block_rq_issue"
      ftrace_events: "cgroup_attach_task"
      ftrace_events: "cgroup_destroy_root"
      ftrace_events: "cgroup_mkdir"
      ftrace_events: "cgroup_release"
      ftrace_events: "cgroup_remount"
      ftrace_events: "cgroup_rename"
      ftrace_events: "cgroup_rmdir"
      ftrace_events: "cgroup_setup_root"
      ftrace_events: "cgroup_transfer_tasks"
      ftrace_events: "clock_disable"
      ftrace_events: "clock_enable"
      ftrace_events: "clock_set_rate"
      ftrace_events: "cpu_frequency"
      ftrace_events: "cpu_frequency_limits"
      ftrace_events: "cpu_idle"
      ftrace_events: "cpufreq_interactive_already"
      ftrace_events: "cpufreq_interactive_boost"
      ftrace_events: "cpufreq_interactive_notyet"
      ftrace_events: "cpufreq_interactive_setspeed"
      ftrace_events: "cpufreq_interactive_target"
      ftrace_events: "cpufreq_interactive_unboost"
      ftrace_events: "ext4_da_write_begin"
      ftrace_events: "ext4_da_write_end"
      ftrace_events: "ext4_sync_file_enter"
      ftrace_events: "ext4_sync_file_exit"
      ftrace_events: "i2c_read"
      ftrace_events: "i2c_reply"
      ftrace_events: "i2c_result"
      ftrace_events: "i2c_write"
      ftrace_events: "ipi_entry"
      ftrace_events: "ipi_exit"
      ftrace_events: "ipi_raise"
      ftrace_events: "irq_handler_entry"
      ftrace_events: "irq_handler_exit"
      ftrace_events: "lowmemory_kill"
      ftrace_events: "mdp_cmd_kickoff"
      ftrace_events: "mdp_cmd_pingpong_done"
      ftrace_events: "mdp_cmd_readptr_done"
      ftrace_events: "mdp_cmd_release_bw"
      ftrace_events: "mdp_cmd_wait_pingpong"
      ftrace_events: "mdp_commit"
      ftrace_events: "mdp_compare_bw"
      ftrace_events: "mdp_misr_crc"
      ftrace_events: "mdp_mixer_update"
      ftrace_events: "mdp_perf_prefill_calc"
      ftrace_events: "mdp_perf_set_ot"
      ftrace_events: "mdp_perf_set_panic_luts"
      ftrace_events: "mdp_perf_set_qos_luts"
      ftrace_events: "mdp_perf_set_wm_levels"
      ftrace_events: "mdp_perf_update_bus"
      ftrace_events: "mdp_sspp_change"
      ftrace_events: "mdp_sspp_set"
      ftrace_events: "mdp_trace_counter"
      ftrace_events: "mdp_video_underrun_done"
      ftrace_events: "mm_compaction_begin"
      ftrace_events: "mm_compaction_defer_compaction"
      ftrace_events: "mm_compaction_defer_reset"
      ftrace_events: "mm_compaction_deferred"
      ftrace_events: "mm_compaction_end"
      ftrace_events: "mm_compaction_finished"
      ftrace_events: "mm_compaction_isolate_freepages"
      ftrace_events: "mm_compaction_isolate_migratepages"
      ftrace_events: "mm_compaction_kcompactd_sleep"
      ftrace_events: "mm_compaction_kcompactd_wake"
      ftrace_events: "mm_compaction_migratepages"
      ftrace_events: "mm_compaction_suitable"
      ftrace_events: "mm_compaction_try_to_compact_pages"
      ftrace_events: "mm_compaction_wakeup_kcompactd"
      ftrace_events: "mm_filemap_add_to_page_cache"
      ftrace_events: "mm_filemap_delete_from_page_cache"
      ftrace_events: "mm_vmscan_direct_reclaim_begin"
      ftrace_events: "mm_vmscan_direct_reclaim_end"
      ftrace_events: "mm_vmscan_kswapd_sleep"
      ftrace_events: "mm_vmscan_kswapd_wake"
      ftrace_events: "print"
      ftrace_events: "regulator_disable"
      ftrace_events: "regulator_disable_complete"
      ftrace_events: "regulator_enable"
      ftrace_events: "regulator_enable_complete"
      ftrace_events: "regulator_enable_delay"
      ftrace_events: "regulator_set_voltage"
      ftrace_events: "regulator_set_voltage_complete"
      ftrace_events: "rotator_bw_ao_as_context"
      ftrace_events: "sched_blocked_reason"
      ftrace_events: "sched_cpu_hotplug"
      ftrace_events: "sched_process_exec"
      ftrace_events: "sched_process_exit"
      ftrace_events: "sched_process_fork"
      ftrace_events: "sched_process_free"
      ftrace_events: "sched_process_hang"
      ftrace_events: "sched_process_wait"
      ftrace_events: "sched_switch"
      ftrace_events: "sched_wakeup"
      ftrace_events: "sched_wakeup_new"
      ftrace_events: "sched_waking"
      ftrace_events: "smbus_read"
      ftrace_events: "smbus_reply"
      ftrace_events: "smbus_result"
      ftrace_events: "smbus_write"
      ftrace_events: "softirq_entry"
      ftrace_events: "softirq_exit"
      ftrace_events: "softirq_raise"
      ftrace_events: "suspend_resume"
      ftrace_events: "sync_pt"
      ftrace_events: "sync_timeline"
      ftrace_events: "sync_wait"
      ftrace_events: "task_newtask"
      ftrace_events: "task_rename"
      ftrace_events: "tracing_mark_write"
      ftrace_events: "workqueue_activate_work"
      ftrace_events: "workqueue_execute_end"
      ftrace_events: "workqueue_execute_start"
      ftrace_events: "workqueue_queue_work"
    }
  }
}

duration_ms: 10000
